<!doctype html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>Customers</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet"
        integrity="sha384-T3c6CoIi6uLrA9TneNEoa7RxnatzjcDSCmG1MXxSR1GAsXEV/Dwwykc2MPK8M2HN" crossorigin="anonymous">
    <link href='https://fonts.googleapis.com/css?family=Italianno' rel='stylesheet'>
    <link rel="stylesheet" type="text/css" href="/css/admin/dashboard.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.2.1/css/all.min.css">
</head>

<body>
    <%- include('../partials/adminoffcanvas') %>
    <div class="container">
        <div class="row">
            <div class="d-flex justify-content-between mt-3">
                <h1 class="text-center ">CUSTOMERS</h1>
               
            </div>
        </div>

        <% if (user!=null) { %>

            <div class="container">
                <div class="row d-flex justify-content-center">
                    <div class="col-md-6 p-2 border border-dark rounded">
                        <table class="table table-striped text-center">
                            <tr>
                                <th class="bg-dark text-white">Customer Name</th>
                                <th class="bg-dark text-white">Customer Email</th>
                                <th class="bg-dark text-white">Status</th>
                                <th class="bg-dark text-white" colspan="2">Actions</th>
                            </tr>
                        
                                <% user.forEach((user,index)=> { %>
                                  <% if (user.status==='Active' ) { %>
                                    <tr>
                                <% } else if (user.status==='Blocked' ) { %>
                                    <tr class="table-danger">
                                <% } %>
                          
                                <td>
                                    <%= user.name %>
                                </td>
                                <td>
                                    <%= user.email %>
                                </td>
                                <td>
                                    <% if (user.status === 'Active') { %>
                                        <p class="text-success fw-bold"><%= user.status %></p>
                                        <% } else if (user.status === 'Blocked') { %>
                                        <p class="text-danger fw-bold"><%= user.status %></p>    
                                    <% } %>
                                </td>
                                <td>
                                    <% if (user.status === 'Active') { %>
                                        <a href="/blockUnblock/<%=user._id%>"><button onclick="return confirm('Are you sure you want to  block the user')" class="btn btn-outline-danger " >Block</button></a>
                                    <% } else if (user.status === 'Blocked') { %>
                                        <a href="/blockUnblock/<%=user._id%>"><button onclick="return confirm('Are you sure you want to  unblock the user')" class="btn btn-outline-success">Unblock</button></a>
                                    <% } %>
                                  </td>  
                            </tr>
                            <% }) %>
                                </tr>
                        </table>
                    </div>
                </div>
                <% if (user==0) { %>
                    <h3 class="alert alert-danger w-50 m-auto my-5 text-center">No Customers Found</h3>    
                    <% } %>    
                        <% } %>      
    
            </div>       
    </div>
    <% if (user.length > 0) { %>
        <div class="d-flex justify-content-between m-auto w-50 align-items-center mt-3">
            <p>Showing <%= (currentPage - 1) * perPage + 1 %>-
              <% if(currentPage === totalPages){%>
                <%=totalCount%>
                <%}else{%>
              <%= currentPage * perPage  %>
              <%}%>
               results from <%= totalCount %></p>
            <ul class="pagination">
              <% for (let i = 1; i <= totalPages; i++) { %>
                <li class="page-item <%= currentPage === i ? 'active' : '' %>">
                  <a class="page-link" href="?page=<%= i %>"><%= i %></a>
                </li>
              <% } %>
            </ul>
          </div>
          
          <!-- <% } else { %>
            <p>No results found.</p> -->
            <% } %>
         
          
           
    
</body>

</html>

<!-- <% if (user.length > 0) { %>
    <div class="d-flex justify-content-between m-auto w-50 align-items-center mt-3">
        <p>Showing <%= (currentPage - 1) * perPage + 1 %>-
          <% if(currentPage === totalPages){%>
            <%=totalCount%>
            <%}else{%>
          <%= currentPage * perPage  %>
          <%}%>
           results from <%= totalCount %></p>
        <ul class="pagination">
          <% for (let i = 1; i <= totalPages; i++) { %>
            <li class="page-item <%= currentPage === i ? 'active' : '' %>">
              <a class="page-link" href="?page=<%= i %>"><%= i %></a>
            </li>
          <% } %>
        </ul>
      </div>
      <% } %> -->



